# Patch to reutrn major VERSION, SOVERSION and LIBTOOL_CURRENT to 12 to avoid
# breaking dependencies, because verstion 2.2.1 is patch only relese including
# only security fixes and no new functionality or API changes
# See https://github.com/openexr/openexr/commit/e69de40ddbb6bd58341618a506b2e913e5ac1797
# See https://github.com/openexr/openexr/issues/250
diff -urNad ilmbase-2.2.1-orig/CMakeLists.txt ilmbase-2.2.1/CMakeLists.txt
--- ilmbase-2.2.1-orig/CMakeLists.txt	2017-11-18 01:00:23.000000000 +0200
+++ ilmbase-2.2.1/CMakeLists.txt	2017-12-10 12:57:36.083952557 +0200
@@ -160,31 +160,31 @@
 
 SET_TARGET_PROPERTIES ( Half
   PROPERTIES
-  VERSION 23.0.0
-  SOVERSION 23
+  VERSION 12.0.0
+  SOVERSION 12
   )
 SET_TARGET_PROPERTIES ( Iex
   PROPERTIES
-  VERSION 23.0.0
-  SOVERSION 23
+  VERSION 12.0.0
+  SOVERSION 12
   OUTPUT_NAME "Iex${ILMBASE_LIBSUFFIX}"
   )
 SET_TARGET_PROPERTIES ( Imath
   PROPERTIES
-  VERSION 23.0.0
-  SOVERSION 23
+  VERSION 12.0.0
+  SOVERSION 12
   OUTPUT_NAME "Imath${ILMBASE_LIBSUFFIX}"
   )
 SET_TARGET_PROPERTIES ( IlmThread
   PROPERTIES
-  VERSION 23.0.0
-  SOVERSION 23
+  VERSION 12.0.0
+  SOVERSION 12
   OUTPUT_NAME "IlmThread${ILMBASE_LIBSUFFIX}"
   )
 SET_TARGET_PROPERTIES ( IexMath
   PROPERTIES
-  VERSION 23.0.0
-  SOVERSION 23
+  VERSION 12.0.0
+  SOVERSION 12
   OUTPUT_NAME "IexMath${ILMBASE_LIBSUFFIX}"
   )
 
diff -urNad ilmbase-2.2.1-orig/configure ilmbase-2.2.1/configure
--- ilmbase-2.2.1-orig/configure	2017-11-18 01:05:28.000000000 +0200
+++ ilmbase-2.2.1/configure	2017-12-10 12:57:44.148263461 +0200
@@ -3115,7 +3115,7 @@
 
 
 
-LIBTOOL_CURRENT=23
+LIBTOOL_CURRENT=12
 LIBTOOL_REVISION=0
 LIBTOOL_AGE=0
 LIBTOOL_VERSION=$LIBTOOL_CURRENT:$LIBTOOL_REVISION:$LIBTOOL_AGE
 
 
diff -urNad ilmbase-2.2.1-orig/configure.ac ilmbase-2.2.1/configure.ac
--- ilmbase-2.2.1-orig/configure.ac	2017-11-18 01:00:24.000000000 +0200
+++ ilmbase-2.2.1/configure.ac	2017-12-10 12:57:50.419727563 +0200
@@ -15,7 +15,7 @@
 AM_MAINTAINER_MODE
 
 
-LIBTOOL_CURRENT=23
+LIBTOOL_CURRENT=12
 LIBTOOL_REVISION=0
 LIBTOOL_AGE=0
 LIBTOOL_VERSION=$LIBTOOL_CURRENT:$LIBTOOL_REVISION:$LIBTOOL_AGE
 AC_SUBST(LIBTOOL_VERSION)
 
